id, type, group,
weeks = tot_count_of_days_in_reporting_period / 7,
# --- General Metrics ---
# schedule (sch) metrics
sch_day_tot = tot_count_of_scheduled_days,
sch_hrs_tot = tot_scheduled_hours_per_day * sch_day_tot,
sch_hrs_pwk = sch_hrs_tot / weeks,
sch_hrs_max = max_scheduled_hours_per_day * max_count_of_scheduled_days,
# system (sys) metrics
sys_hrs_tot = tot_count_of_minutes_in_the_system / 60,
sys_hrs_pwk = sys_hrs_tot / weeks,
# afterhours (aft) metrics
aft_hrs_tot = tot_count_of_minutes_active_outside_scheduled_time_30_min_buffer +
tot_count_of_minutes_active_on_unscheduled_days +
tot_count_of_saturday_minutes +
tot_count_of_sunday_minutes / 60,
aft_hrs_pwk = aft_hrs_tot / weeks,
aft_hrs_sys_rat = aft_hrs_tot / (tot_count_of_minutes_in_the_system / 60),
# appointment (apt) metrics
apt_tot = tot_count_of_appointments,
apt_pwk = apt_tot / weeks,
# minutes per appointment (mpa)
mpa_ib = tot_minutes_in_in_basket_per_appointment,
mpa_cr = tot_minutes_in_clinical_review_per_appointment,
mpa_nl = tot_minutes_in_notes_letters_per_appointment,
mpa_or = tot_minutes_in_orders_per_appointment,
mpa = mpa_ib + mpa_cr + mpa_nl + mpa_or,
mpa_pct_ib = ifelse(mpa_ib > 0, mpa_ib / mpa, NA),
mpa_pct_cr = ifelse(mpa_cr > 0, mpa_cr / mpa, NA),
mpa_pct_nl = ifelse(mpa_nl > 0, mpa_nl / mpa, NA),
mpa_pct_or = ifelse(mpa_or > 0, mpa_or / mpa, NA),
# --- Inbox metrics ---
# message (msg) metrics
msg_mar_tot = tot_count_of_patient_medical_advice_requests_messages_received,
msg_pcm_tot = tot_count_of_patient_call_messages_received,
msg_res_tot = tot_count_of_result_messages_received,
msg_rxa_tot = tot_count_of_rx_auth_messages_received,
msg_all_tot = msg_mar_tot + msg_pcm_tot + msg_res_tot + msg_rxa_tot,
msg_mar_pwk = msg_mar_tot / weeks,
msg_pcm_pwk = msg_pcm_tot / weeks,
msg_res_pwk = msg_res_tot / weeks,
msg_rxa_pwk = msg_rxa_tot / weeks,
msg_all_pwk = msg_all_tot / weeks,
msg_mar_dtc = tot_average_days_until_patient_medical_advice_request_message_marked_done,
msg_pcm_dtc = tot_average_days_until_patient_call_messages_marked_done,
msg_res_dtc = tot_average_days_until_result_message_marked_done,
msg_rxa_dtc = tot_average_days_until_rx_auth_message_marked_done,
msg_all_dtc = (msg_mar_dtc + msg_pcm_dtc + msg_res_dtc + msg_rxa_dtc) / 4,
# in-basket (ib) metrics
ib_hrs = tot_count_of_in_basket_minutes / 60,
ib_hrs_pwk = ib_hrs / weeks,
ib_mpa = tot_count_of_in_basket_minutes / apt_tot,
ib_sys_rat = tot_count_of_in_basket_minutes / tot_count_of_minutes_in_the_system,
ib_sch_rat = ib_hrs / sch_hrs_tot
) |>
select(
id, type, group, weeks,
starts_with(c("msg_", "ib_", "sch_", "sys_", "aft_", "apt_", "mpa_"))
)
View(full)
# Engineer
full <- aggregated |>
transmute(
# object identifiers
id, type, group,
weeks = tot_count_of_days_in_reporting_period / 7,
# --- General Metrics ---
# schedule (sch) metrics
sch_day_tot = tot_count_of_scheduled_days,
sch_hrs_tot = tot_scheduled_hours_per_day * sch_day_tot,
sch_hrs_pwk = sch_hrs_tot / weeks,
sch_hrs_max = max_scheduled_hours_per_day * (max_count_of_scheduled_days / weeks),
# system (sys) metrics
sys_hrs_tot = tot_count_of_minutes_in_the_system / 60,
sys_hrs_pwk = sys_hrs_tot / weeks,
# afterhours (aft) metrics
aft_hrs_tot = tot_count_of_minutes_active_outside_scheduled_time_30_min_buffer +
tot_count_of_minutes_active_on_unscheduled_days +
tot_count_of_saturday_minutes +
tot_count_of_sunday_minutes / 60,
aft_hrs_pwk = aft_hrs_tot / weeks,
aft_hrs_sys_rat = aft_hrs_tot / (tot_count_of_minutes_in_the_system / 60),
# appointment (apt) metrics
apt_tot = tot_count_of_appointments,
apt_pwk = apt_tot / weeks,
# minutes per appointment (mpa)
mpa_ib = tot_minutes_in_in_basket_per_appointment,
mpa_cr = tot_minutes_in_clinical_review_per_appointment,
mpa_nl = tot_minutes_in_notes_letters_per_appointment,
mpa_or = tot_minutes_in_orders_per_appointment,
mpa = mpa_ib + mpa_cr + mpa_nl + mpa_or,
mpa_pct_ib = ifelse(mpa_ib > 0, mpa_ib / mpa, NA),
mpa_pct_cr = ifelse(mpa_cr > 0, mpa_cr / mpa, NA),
mpa_pct_nl = ifelse(mpa_nl > 0, mpa_nl / mpa, NA),
mpa_pct_or = ifelse(mpa_or > 0, mpa_or / mpa, NA),
# --- Inbox metrics ---
# message (msg) metrics
msg_mar_tot = tot_count_of_patient_medical_advice_requests_messages_received,
msg_pcm_tot = tot_count_of_patient_call_messages_received,
msg_res_tot = tot_count_of_result_messages_received,
msg_rxa_tot = tot_count_of_rx_auth_messages_received,
msg_all_tot = msg_mar_tot + msg_pcm_tot + msg_res_tot + msg_rxa_tot,
msg_mar_pwk = msg_mar_tot / weeks,
msg_pcm_pwk = msg_pcm_tot / weeks,
msg_res_pwk = msg_res_tot / weeks,
msg_rxa_pwk = msg_rxa_tot / weeks,
msg_all_pwk = msg_all_tot / weeks,
msg_mar_dtc = tot_average_days_until_patient_medical_advice_request_message_marked_done,
msg_pcm_dtc = tot_average_days_until_patient_call_messages_marked_done,
msg_res_dtc = tot_average_days_until_result_message_marked_done,
msg_rxa_dtc = tot_average_days_until_rx_auth_message_marked_done,
msg_all_dtc = (msg_mar_dtc + msg_pcm_dtc + msg_res_dtc + msg_rxa_dtc) / 4,
# in-basket (ib) metrics
ib_hrs = tot_count_of_in_basket_minutes / 60,
ib_hrs_pwk = ib_hrs / weeks,
ib_mpa = tot_count_of_in_basket_minutes / apt_tot,
ib_sys_rat = tot_count_of_in_basket_minutes / tot_count_of_minutes_in_the_system,
ib_sch_rat = ib_hrs / sch_hrs_tot
) |>
select(
id, type, group, weeks,
starts_with(c("msg_", "ib_", "sch_", "sys_", "aft_", "apt_", "mpa_"))
)
View(full)
# Engineer
full <- aggregated |>
transmute(
# object identifiers
id, type, group,
weeks = tot_count_of_days_in_reporting_period / 7,
# --- General Metrics ---
# schedule (sch) metrics
sch_day_tot = tot_count_of_scheduled_days,
sch_day_pwk = sch_day_tot / weeks,
sch_hrs_tot = tot_scheduled_hours_per_day * sch_day_tot,
sch_hrs_pwk = sch_hrs_tot / weeks,
# system (sys) metrics
sys_hrs_tot = tot_count_of_minutes_in_the_system / 60,
sys_hrs_pwk = sys_hrs_tot / weeks,
# afterhours (aft) metrics
aft_hrs_tot = tot_count_of_minutes_active_outside_scheduled_time_30_min_buffer +
tot_count_of_minutes_active_on_unscheduled_days +
tot_count_of_saturday_minutes +
tot_count_of_sunday_minutes / 60,
aft_hrs_pwk = aft_hrs_tot / weeks,
aft_hrs_sys_rat = aft_hrs_tot / (tot_count_of_minutes_in_the_system / 60),
# appointment (apt) metrics
apt_tot = tot_count_of_appointments,
apt_pwk = apt_tot / weeks,
# minutes per appointment (mpa)
mpa_ib = tot_minutes_in_in_basket_per_appointment,
mpa_cr = tot_minutes_in_clinical_review_per_appointment,
mpa_nl = tot_minutes_in_notes_letters_per_appointment,
mpa_or = tot_minutes_in_orders_per_appointment,
mpa = mpa_ib + mpa_cr + mpa_nl + mpa_or,
mpa_pct_ib = ifelse(mpa_ib > 0, mpa_ib / mpa, NA),
mpa_pct_cr = ifelse(mpa_cr > 0, mpa_cr / mpa, NA),
mpa_pct_nl = ifelse(mpa_nl > 0, mpa_nl / mpa, NA),
mpa_pct_or = ifelse(mpa_or > 0, mpa_or / mpa, NA),
# --- Inbox metrics ---
# message (msg) metrics
msg_mar_tot = tot_count_of_patient_medical_advice_requests_messages_received,
msg_pcm_tot = tot_count_of_patient_call_messages_received,
msg_res_tot = tot_count_of_result_messages_received,
msg_rxa_tot = tot_count_of_rx_auth_messages_received,
msg_all_tot = msg_mar_tot + msg_pcm_tot + msg_res_tot + msg_rxa_tot,
msg_mar_pwk = msg_mar_tot / weeks,
msg_pcm_pwk = msg_pcm_tot / weeks,
msg_res_pwk = msg_res_tot / weeks,
msg_rxa_pwk = msg_rxa_tot / weeks,
msg_all_pwk = msg_all_tot / weeks,
msg_mar_dtc = tot_average_days_until_patient_medical_advice_request_message_marked_done,
msg_pcm_dtc = tot_average_days_until_patient_call_messages_marked_done,
msg_res_dtc = tot_average_days_until_result_message_marked_done,
msg_rxa_dtc = tot_average_days_until_rx_auth_message_marked_done,
msg_all_dtc = (msg_mar_dtc + msg_pcm_dtc + msg_res_dtc + msg_rxa_dtc) / 4,
# in-basket (ib) metrics
ib_hrs = tot_count_of_in_basket_minutes / 60,
ib_hrs_pwk = ib_hrs / weeks,
ib_mpa = tot_count_of_in_basket_minutes / apt_tot,
ib_sys_rat = tot_count_of_in_basket_minutes / tot_count_of_minutes_in_the_system,
ib_sch_rat = ib_hrs / sch_hrs_tot
) |>
select(
id, type, group, weeks,
starts_with(c("msg_", "ib_", "sch_", "sys_", "aft_", "apt_", "mpa_"))
)
View(full)
# Load raw data
raw <- bind_rows(
read_excel("Epic Signal PEP Data.xlsx", sheet = "Messages"),
read_excel("Epic Signal PEP Data.xlsx", sheet = "Time")
)
# Initial exploration
str(raw)
head(raw)
sort(unique(raw$Metric))
# Data cleaning
clean <- raw |>
mutate(
id = as.character(DE_ID),
type = factor(
case_when(
Grouper == "PHYSICIAN + PSYCHIATRIST" ~ "MD",
Grouper == "NURSE PRACTITIONER" ~ "NP",
Grouper == "RESIDENT + FELLOW" ~ "RF",
TRUE ~ Grouper
),
levels = c("MD", "NP", "RF")
),
group =
factor(
case_when(
type %in% c("MD", "NP") ~ "Staff",
TRUE ~ "Trainee"
),
levels = c("Staff", "Trainee")
),
# fix typo
metric = str_replace(Metric, "Recieved", "Received")
) |>
# remove duplicates
distinct(id, type, metric, .keep_all = TRUE) |>
# select columns
select(id, type, group, metric, starts_with(c("24-", "25-")))
# Reshape
wide <- clean |>
pivot_longer(starts_with(c("24-", "25-")), names_to = "month", values_to = "value") |>
pivot_wider(names_from = c("metric", "month"), values_from = "value") |>
clean_names()
long <- clean |>
pivot_longer(starts_with(c("24-", "25-")), names_to = "month", values_to = "value") |>
mutate(
month = ym(month)
)
monthly <- long |>
pivot_wider(names_from = metric, values_from = value) |>
clean_names()
# Aggregate
aggregated <- clean |>
rowwise() |>
mutate(
tot = ifelse(str_starts(metric, "Count Of"),
sum(c_across(starts_with(c("24-", "25-"))), na.rm = TRUE),
mean(c_across(starts_with(c("24-", "25-"))), na.rm = TRUE)),
min = min(c_across(starts_with(c("24-", "25-"))), na.rm = TRUE),
max = max(c_across(starts_with(c("24-", "25-"))), na.rm = TRUE)
) |> ungroup() |>
select(id, type, group, metric, tot, min, max) |>
pivot_wider(
names_from = metric,
values_from = c(tot, min, max),
names_sep = "_"
) |> clean_names()
# Engineer
full <- aggregated |>
transmute(
# object identifiers
id, type, group,
weeks = tot_count_of_days_in_reporting_period / 7,
# --- General Metrics ---
# schedule (sch) metrics
sch_day_tot = tot_count_of_scheduled_days,
sch_day_pwk = sch_day_tot / weeks,
sch_hrs_tot = tot_scheduled_hours_per_day * sch_day_tot,
sch_hrs_pwk = sch_hrs_tot / weeks,
# system (sys) metrics
sys_hrs_tot = tot_count_of_minutes_in_the_system / 60,
sys_hrs_pwk = sys_hrs_tot / weeks,
# afterhours (aft) metrics
aft_hrs_tot = tot_count_of_minutes_active_outside_scheduled_time_30_min_buffer +
tot_count_of_minutes_active_on_unscheduled_days +
tot_count_of_saturday_minutes +
tot_count_of_sunday_minutes / 60,
aft_hrs_pwk = aft_hrs_tot / weeks,
aft_hrs_sys_rat = aft_hrs_tot / (tot_count_of_minutes_in_the_system / 60),
# appointment (apt) metrics
apt_tot = tot_count_of_appointments,
apt_pwk = apt_tot / weeks,
# minutes per appointment (mpa)
mpa_ib = tot_minutes_in_in_basket_per_appointment,
mpa_cr = tot_minutes_in_clinical_review_per_appointment,
mpa_nl = tot_minutes_in_notes_letters_per_appointment,
mpa_or = tot_minutes_in_orders_per_appointment,
mpa = mpa_ib + mpa_cr + mpa_nl + mpa_or,
mpa_pct_ib = ifelse(mpa_ib > 0, mpa_ib / mpa, NA),
mpa_pct_cr = ifelse(mpa_cr > 0, mpa_cr / mpa, NA),
mpa_pct_nl = ifelse(mpa_nl > 0, mpa_nl / mpa, NA),
mpa_pct_or = ifelse(mpa_or > 0, mpa_or / mpa, NA),
# --- Inbox metrics ---
# message (msg) metrics
msg_mar_tot = tot_count_of_patient_medical_advice_requests_messages_received,
msg_pcm_tot = tot_count_of_patient_call_messages_received,
msg_res_tot = tot_count_of_result_messages_received,
msg_rxa_tot = tot_count_of_rx_auth_messages_received,
msg_all_tot = msg_mar_tot + msg_pcm_tot + msg_res_tot + msg_rxa_tot,
msg_mar_pwk = msg_mar_tot / weeks,
msg_pcm_pwk = msg_pcm_tot / weeks,
msg_res_pwk = msg_res_tot / weeks,
msg_rxa_pwk = msg_rxa_tot / weeks,
msg_all_pwk = msg_all_tot / weeks,
msg_mar_dtc = tot_average_days_until_patient_medical_advice_request_message_marked_done,
msg_pcm_dtc = tot_average_days_until_patient_call_messages_marked_done,
msg_res_dtc = tot_average_days_until_result_message_marked_done,
msg_rxa_dtc = tot_average_days_until_rx_auth_message_marked_done,
msg_all_dtc = (msg_mar_dtc + msg_pcm_dtc + msg_res_dtc + msg_rxa_dtc) / 4,
# in-basket (ib) metrics
ib_hrs = tot_count_of_in_basket_minutes / 60,
ib_hrs_pwk = ib_hrs / weeks,
ib_mpa = tot_count_of_in_basket_minutes / apt_tot,
ib_sys_rat = tot_count_of_in_basket_minutes / tot_count_of_minutes_in_the_system,
ib_sch_rat = ib_hrs / sch_hrs_tot
) |>
select(
id, type, group, weeks,
starts_with(c("msg_", "ib_", "sch_", "sys_", "aft_", "apt_", "mpa_"))
)
# Filter to providers with at least 0.1 FTE (at least one month with >= 16 hours scheduled)
final <- full |> filter(sch_hrs_pwk >= 4)
excluded <- anti_join(full, final, by = "id")
# Save all datasets
if (!dir.exists("data")) {
dir.create("data")
}
raw |> saveRDS("data/raw.rds")
clean |> saveRDS("data/clean.rds")
wide |> saveRDS("data/wide.rds")
long |> saveRDS("data/long.rds")
monthly |> saveRDS("data/monthly.rds")
aggregated |> saveRDS("data/aggregated.rds")
full |> saveRDS("data/full.rds")
final |> saveRDS("data/final.rds")
excluded |> saveRDS("data/excluded.rds")
# Figure 1: Barplot of ranked In-Basket Hours Per Month (colored by Provider Type)
fig1 <- ggplot(final, aes(x = reorder(id, -ib_hrs_pwk), y = ib_hrs_pwk, fill = type)) +
geom_bar(stat = "identity") +
labs(
title = "In-Basket Hours Per Month by Provider",
x = "Provider (ranked)",
y = "In-Basket Hours Per Month"
) +
theme_minimal() +
theme(axis.text.x = element_blank())
fig1
# Engineer
full <- aggregated |>
transmute(
# object identifiers
id, type, group,
days = tot_count_of_days_in_reporting_period,
# --- General Metrics ---
sch_days = tot_count_of_scheduled_days,
sch_hrs = tot_scheduled_hours_per_day * sch_days,
sys_hrs = tot_count_of_minutes_in_the_system / 60,
aft_hrs = (tot_count_of_minutes_active_outside_scheduled_time_30_min_buffer +
tot_count_of_minutes_active_on_unscheduled_days +
tot_count_of_saturday_minutes +
tot_count_of_sunday_minutes) / 60,
appts = tot_count_of_appointments,
# minutes per appointment (mpa)
mpa_ib = tot_minutes_in_in_basket_per_appointment,
mpa_cr = tot_minutes_in_clinical_review_per_appointment,
mpa_nl = tot_minutes_in_notes_letters_per_appointment,
mpa_or = tot_minutes_in_orders_per_appointment,
mpa = mpa_ib + mpa_cr + mpa_nl + mpa_or,
mpa_pct_ib = ifelse(mpa_ib > 0, mpa_ib / mpa, NA),
mpa_pct_cr = ifelse(mpa_cr > 0, mpa_cr / mpa, NA),
mpa_pct_nl = ifelse(mpa_nl > 0, mpa_nl / mpa, NA),
mpa_pct_or = ifelse(mpa_or > 0, mpa_or / mpa, NA),
# --- Inbox metrics ---
# message (msg) metrics
msg_mar = tot_count_of_patient_medical_advice_requests_messages_received,
msg_pcm = tot_count_of_patient_call_messages_received,
msg_res = tot_count_of_result_messages_received,
msg_rxa = tot_count_of_rx_auth_messages_received,
msg_all = msg_mar_tot + msg_pcm_tot + msg_res_tot + msg_rxa_tot,
dtc_mar = tot_average_days_until_patient_medical_advice_request_message_marked_done,
dtc_pcm = tot_average_days_until_patient_call_messages_marked_done,
dtc_res = tot_average_days_until_result_message_marked_done,
dtc_rxa = tot_average_days_until_rx_auth_message_marked_done,
dtc_all = (msg_mar_dtc + msg_pcm_dtc + msg_res_dtc + msg_rxa_dtc) / 4,
# in-basket (ib) metrics
ib_hrs = tot_count_of_in_basket_minutes / 60,
)
# Engineer
full <- aggregated |>
transmute(
# object identifiers
id, type, group,
days = tot_count_of_days_in_reporting_period,
# --- General Metrics ---
sch_days = tot_count_of_scheduled_days,
sch_hrs = tot_scheduled_hours_per_day * sch_days,
sys_hrs = tot_count_of_minutes_in_the_system / 60,
aft_hrs = (tot_count_of_minutes_active_outside_scheduled_time_30_min_buffer +
tot_count_of_minutes_active_on_unscheduled_days +
tot_count_of_saturday_minutes +
tot_count_of_sunday_minutes) / 60,
appts = tot_count_of_appointments,
# minutes per appointment (mpa)
mpa_ib = tot_minutes_in_in_basket_per_appointment,
mpa_cr = tot_minutes_in_clinical_review_per_appointment,
mpa_nl = tot_minutes_in_notes_letters_per_appointment,
mpa_or = tot_minutes_in_orders_per_appointment,
mpa = mpa_ib + mpa_cr + mpa_nl + mpa_or,
mpa_pct_ib = ifelse(mpa_ib > 0, mpa_ib / mpa, NA),
mpa_pct_cr = ifelse(mpa_cr > 0, mpa_cr / mpa, NA),
mpa_pct_nl = ifelse(mpa_nl > 0, mpa_nl / mpa, NA),
mpa_pct_or = ifelse(mpa_or > 0, mpa_or / mpa, NA),
# --- Inbox metrics ---
# message (msg) metrics
msg_mar = tot_count_of_patient_medical_advice_requests_messages_received,
msg_pcm = tot_count_of_patient_call_messages_received,
msg_res = tot_count_of_result_messages_received,
msg_rxa = tot_count_of_rx_auth_messages_received,
msg_all = msg_mar + msg_pcm + msg_res + msg_rxa,
dtc_mar = tot_average_days_until_patient_medical_advice_request_message_marked_done,
dtc_pcm = tot_average_days_until_patient_call_messages_marked_done,
dtc_res = tot_average_days_until_result_message_marked_done,
dtc_rxa = tot_average_days_until_rx_auth_message_marked_done,
dtc_all = (dtc_mar + dtc_pcm + dtc_res + dtc_rxa) / 4,
# in-basket (ib) metrics
ib_hrs = tot_count_of_in_basket_minutes / 60,
)
View(full)
30.44*12
# Engineer
full <- aggregated |>
transmute(
# object identifiers
id, type, group,
days = tot_count_of_days_in_reporting_period,
weeks = days / 7,
months = days / 28,
# --- General Metrics ---
sch_days = tot_count_of_scheduled_days,
sch_hrs = tot_scheduled_hours_per_day * sch_days,
sys_hrs = tot_count_of_minutes_in_the_system / 60,
aft_hrs = (tot_count_of_minutes_active_outside_scheduled_time_30_min_buffer +
tot_count_of_minutes_active_on_unscheduled_days +
tot_count_of_saturday_minutes +
tot_count_of_sunday_minutes) / 60,
appts = tot_count_of_appointments,
# minutes per appointment (mpa)
mpa_ib = tot_minutes_in_in_basket_per_appointment,
mpa_cr = tot_minutes_in_clinical_review_per_appointment,
mpa_nl = tot_minutes_in_notes_letters_per_appointment,
mpa_or = tot_minutes_in_orders_per_appointment,
mpa = mpa_ib + mpa_cr + mpa_nl + mpa_or,
mpa_pct_ib = ifelse(mpa_ib > 0, mpa_ib / mpa, NA),
mpa_pct_cr = ifelse(mpa_cr > 0, mpa_cr / mpa, NA),
mpa_pct_nl = ifelse(mpa_nl > 0, mpa_nl / mpa, NA),
mpa_pct_or = ifelse(mpa_or > 0, mpa_or / mpa, NA),
# --- Inbox metrics ---
# message (msg) metrics
msg_mar = tot_count_of_patient_medical_advice_requests_messages_received,
msg_pcm = tot_count_of_patient_call_messages_received,
msg_res = tot_count_of_result_messages_received,
msg_rxa = tot_count_of_rx_auth_messages_received,
msg_all = msg_mar + msg_pcm + msg_res + msg_rxa,
dtc_mar = tot_average_days_until_patient_medical_advice_request_message_marked_done,
dtc_pcm = tot_average_days_until_patient_call_messages_marked_done,
dtc_res = tot_average_days_until_result_message_marked_done,
dtc_rxa = tot_average_days_until_rx_auth_message_marked_done,
dtc_all = (dtc_mar + dtc_pcm + dtc_res + dtc_rxa) / 4,
# in-basket (ib) metrics
ib_hrs = tot_count_of_in_basket_minutes / 60,
)
View(full)
# Engineer
full <- aggregated |>
transmute(
# object identifiers
id, type, group,
days = tot_count_of_days_in_reporting_period,
weeks = days / 7,
months = days / 28,
# --- General Metrics ---
sch_days = tot_count_of_scheduled_days,
sch_hrs = tot_scheduled_hours_per_day * sch_days,
sys_hrs = tot_count_of_minutes_in_the_system / 60,
aft_hrs = (tot_count_of_minutes_active_outside_scheduled_time_30_min_buffer +
tot_count_of_minutes_active_on_unscheduled_days +
tot_count_of_saturday_minutes +
tot_count_of_sunday_minutes) / 60,
appts = tot_count_of_appointments,
# minutes per appointment (mpa)
mpa_ib = tot_minutes_in_in_basket_per_appointment,
mpa_cr = tot_minutes_in_clinical_review_per_appointment,
mpa_nl = tot_minutes_in_notes_letters_per_appointment,
mpa_or = tot_minutes_in_orders_per_appointment,
mpa = mpa_ib + mpa_cr + mpa_nl + mpa_or,
mpa_pct_ib = ifelse(mpa_ib > 0, mpa_ib / mpa, NA),
mpa_pct_cr = ifelse(mpa_cr > 0, mpa_cr / mpa, NA),
mpa_pct_nl = ifelse(mpa_nl > 0, mpa_nl / mpa, NA),
mpa_pct_or = ifelse(mpa_or > 0, mpa_or / mpa, NA),
# --- Inbox metrics ---
# message (msg) metrics
msg_mar = tot_count_of_patient_medical_advice_requests_messages_received,
msg_pcm = tot_count_of_patient_call_messages_received,
msg_res = tot_count_of_result_messages_received,
msg_rxa = tot_count_of_rx_auth_messages_received,
msg_all = msg_mar + msg_pcm + msg_res + msg_rxa,
dtc_mar = tot_average_days_until_patient_medical_advice_request_message_marked_done,
dtc_pcm = tot_average_days_until_patient_call_messages_marked_done,
dtc_res = tot_average_days_until_result_message_marked_done,
dtc_rxa = tot_average_days_until_rx_auth_message_marked_done,
dtc_all = (dtc_mar + dtc_pcm + dtc_res + dtc_rxa) / 4,
ib_hrs = tot_count_of_in_basket_minutes / 60,
fte = round(sch_hrs / (40 * weeks), 2)
)
View(full)
