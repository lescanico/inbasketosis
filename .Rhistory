fig4 <- monthly |>
filter(metric %in% c("Count Of Appointments", "Count Of In Basket Minutes",
"Count Of Minutes Active Outside Scheduled Time (30 Min Buffer)",
"Count Of Minutes Active On Unscheduled Days")) |>
ggplot(aes(x = month, y = value, color = metric, group = metric)) +
geom_line() +
geom_point() +
labs(
title = "Monthly Trends of Key Metrics",
x = "Month",
y = "Value",
color = "Metric"
) +
theme_minimal()
fig4
# Figure 4: plot each metric as a line across months (from monthly dataset)
fig4 <- monthly |>
filter(metric %in% c("Count Of Appointments", "Count Of In Basket Minutes",
"Count Of Minutes Active Outside Scheduled Time (30 Min Buffer)",
"Count Of Minutes Active On Unscheduled Days")) |>
# Pivot to long format for plotting
pivot_longer(
cols = starts_with(c("24-", "25-")),
names_to = "month_str",
values_to = "value"
) |>
mutate(
# Create proper date for ordering
month_num = case_when(
str_detect(month_str, "jul") ~ 7, str_detect(month_str, "aug") ~ 8,
str_detect(month_str, "sep") ~ 9, str_detect(month_str, "oct") ~ 10,
str_detect(month_str, "nov") ~ 11, str_detect(month_str, "dec") ~ 12,
str_detect(month_str, "jan") ~ 1, str_detect(month_str, "feb") ~ 2,
str_detect(month_str, "mar") ~ 3, str_detect(month_str, "apr") ~ 4,
str_detect(month_str, "may") ~ 5, str_detect(month_str, "jun") ~ 6
),
year = ifelse(str_detect(month_str, "24"), 2024, 2025),
date = ymd(paste(year, month_num, "01")),
# Convert minutes to hours for in-basket metrics
value = ifelse(str_detect(metric, "In Basket Minutes|Minutes Active"), value / 60, value)
) |>
ggplot(aes(x = date, y = value, color = metric, group = metric)) +
geom_line() +
geom_point() +
labs(
title = "Monthly Trends of Key Metrics",
x = "Month",
y = "Value (Hours for Time Metrics)",
color = "Metric"
) +
scale_x_date(date_labels = "%b %Y", date_breaks = "1 month") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
View(full)
View(long)
str(long)
fig4 <- long |>
filter(metric %in% c("Count Of In Basket Minutes",
"Count Of Appointments",
"Count Of Scheduled Days")) |>
ggplot(aes(x = month, y = value, color = metric, group = metric)) +
geom_line() +
geom_point() +
labs(
title = "Monthly Trends of Key Metrics",
x = "Month",
y = "Value",
color = "Metric"
) +
theme_minimal()
fig4
filter(metric %in% c("Count Of In Basket Minutes") |>
fig4
# Figure 4: plot Count Of In Basket Minutes as a line across months (from long dataset)
fig4 <- long |>
filter(metric == "Count Of In Basket Minutes") |>
ggplot(aes(x = month, y = value, group = id, color = type)) +
geom_line(alpha = 0.3) +
geom_smooth(aes(group = type), method = "loess", se = FALSE, size = 1) +
labs(
title = "Monthly In-Basket Minutes by Provider Type",
x = "Month",
y = "In-Basket Minutes"
) +
theme_minimal()
fig4
# Figure 4: plot Count Of In Basket Minutes as a line across months (from long dataset)
fig4 <- long |>
filter(metric == "Count Of In Basket Minutes") |>
ggplot(aes(x = month, y = value, group = id)) +
geom_line(alpha = 0.3) +
geom_smooth(aes(group = type), method = "loess", se = FALSE, size = 1) +
labs(
title = "Monthly In-Basket Minutes by Provider Type",
x = "Month",
y = "In-Basket Minutes"
) +
theme_minimal()
fig4
# Figure 4: plot Count Of In Basket Minutes as a line across months (from long dataset) without distinguishing provider types
fig4 <- monthly |>
filter(metric == "Count Of In Basket Minutes") |>
ggplot(aes(x = month, y = tot, group = 1)) +
geom_line(color = "blue", size = 1) +
geom_point() +
labs(
title = "Total In-Basket Minutes Across Months",
x = "Month",
y = "Total In-Basket Minutes"
) +
theme_minimal()
fig4
# Figure 4: plot Count Of In Basket Minutes as a line across months (from long dataset) without distinguishing provider types
fig4 <- long |>
filter(metric == "Count Of In Basket Minutes") |>
ggplot(aes(x = month, y = tot, group = 1)) +
geom_line(color = "blue", size = 1) +
geom_point() +
labs(
title = "Total In-Basket Minutes Across Months",
x = "Month",
y = "Total In-Basket Minutes"
) +
theme_minimal()
fig4
View(long)
# Figure 4: plot Count Of In Basket Minutes as a line across months (from long dataset) without distinguishing provider types
fig4 <- long |>
filter(metric == "Count Of In Basket Minutes") |>
ggplot(aes(x = month, y = value, group = 1)) +
geom_line(color = "blue", size = 1) +
geom_point() +
labs(
title = "Total In-Basket Minutes Across Months",
x = "Month",
y = "Total In-Basket Minutes"
) +
theme_minimal()
fig4
# Figure 4: plot Count Of In Basket Minutes as a line across months (from long dataset) without distinguishing provider types
fig4 <- long |>
filter(metric == "Count Of In Basket Minutes") |>
ggplot(aes(x = month, y = value)) +
geom_line(color = "blue", size = 1) +
geom_point() +
labs(
title = "Total In-Basket Minutes Across Months",
x = "Month",
y = "Total In-Basket Minutes"
) +
theme_minimal()
fig4
# Figure 4: plot "Count Of In Basket Minutes" individual and aggregate lines over time from long dataset
fig4 <- long |>
filter(metric == "Count Of In Basket Minutes") |>
ggplot(aes(x = month, y = value, group = id, color = type)) +
geom_line(alpha = 0.3) +
geom_line(
data = monthly |>
filter(metric == "Count Of In Basket Minutes") |>
group_by(month) |>
summarise(value = sum(value, na.rm = TRUE)),
aes(x = month, y = value),
color = "black",
size = 1.5
) +
labs(
title = "In-Basket Minutes Over Time by Provider",
x = "Month",
y = "In-Basket Minutes"
) +
theme_minimal()
# Figure 4: plot "Count Of In Basket Minutes" individual and aggregate lines over time from long dataset
fig4 <- long |>
filter(metric == "Count Of In Basket Minutes") |>
ggplot(aes(x = month, y = value, group = id, color = type)) +
geom_line(alpha = 0.3) +
geom_line(
data = monthly |>
filter(metric == "Count Of In Basket Minutes") |>
group_by(month) |>
summarise(value = sum(value, na.rm = TRUE)),
aes(x = month, y = value),
color = "black",
size = 1.5
) +
labs(
title = "In-Basket Minutes Over Time by Provider",
x = "Month",
y = "In-Basket Minutes"
) +
theme_minimal()
View(long)
# Figure 4: plot "Count Of In Basket Minutes" individual and aggregate lines over time from long dataset
fig4 <- long |>
filter(metric == "Count Of In Basket Minutes") |>
ggplot(aes(x = month, y = value, group = id, color = type)) +
geom_line(alpha = 0.3) +
geom_line(
data = long |>
filter(metric == "Count Of In Basket Minutes") |>
group_by(month) |>
summarise(value = sum(value, na.rm = TRUE)),
aes(x = month, y = value),
color = "black",
size = 1.5
) +
labs(
title = "In-Basket Minutes Over Time by Provider",
x = "Month",
y = "In-Basket Minutes"
) +
theme_minimal()
fig4
# Figure 4: plot "Count Of In Basket Minutes" individual and aggregate lines over time from long dataset
fig4 <- long |>
filter(metric == "Count Of In Basket Minutes") |>
ggplot(aes(x = month, y = value, group = id, color = "blue")) +
geom_line(alpha = 0.3) +
geom_line(
data = long |>
filter(metric == "Count Of In Basket Minutes") |>
group_by(month) |>
summarise(value = sum(value, na.rm = TRUE)),
aes(x = month, y = value),
color = "black",
size = 1.5
) +
labs(
title = "In-Basket Minutes Over Time by Provider",
x = "Month",
y = "In-Basket Minutes"
) +
theme_minimal()
fig4
# Figure 4: plot "Count Of In Basket Minutes" individual and aggregate lines over time from long dataset
fig4 <- long |>
filter(metric == "Count Of In Basket Minutes") |>
ggplot(aes(x = month, y = value, group = month, color = id)) +
geom_line(alpha = 0.3) +
geom_line(
data = long |>
filter(metric == "Count Of In Basket Minutes") |>
group_by(month) |>
summarise(value = sum(value, na.rm = TRUE)),
aes(x = month, y = value),
color = "black",
size = 1.5
) +
labs(
title = "In-Basket Minutes Over Time by Provider",
x = "Month",
y = "In-Basket Minutes"
) +
theme_minimal()
fig4
# Figure 4: plot line of "Count Of In Basket Minutes" across months
fig4 <- long |>
filter(metric == "Count Of In Basket Minutes") |>
ggplot(aes(x = month, y = value, group = id, color = type)) +
geom_line(alpha = 0.3) +
geom_smooth(aes(group = type), method = "loess", se = FALSE, size = 1) +
labs(
title = "In-Basket Minutes Over Time by Provider Type",
x = "Month",
y = "In-Basket Minutes"
) +
theme_minimal()
fig4
# Figure 4: plot line of "Count Of In Basket Minutes" across months
fig4 <- long |>
filter(metric == "Count Of In Basket Minutes") |>
ggplot(aes(x = month, y = value, group = id, color = type)) +
geom_line(alpha = 0.3) +
geom_smooth(aes(group = NULL), method = "loess", se = FALSE, size = 1) +
labs(
title = "In-Basket Minutes Over Time by Provider Type",
x = "Month",
y = "In-Basket Minutes"
) +
theme_minimal()
fig4
# Figure 4: plot line of "Count Of In Basket Minutes" across months
fig4 <- long |>
filter(metric == "Count Of In Basket Minutes") |>
ggplot(aes(x = month, y = value, group = id, color = type)) +
geom_line(alpha = 0.3) +
geom_smooth(aes(group = id), method = "loess", se = FALSE, size = 1) +
labs(
title = "In-Basket Minutes Over Time by Provider Type",
x = "Month",
y = "In-Basket Minutes"
) +
theme_minimal()
fig4
# Figure 4: plot line of "Count Of In Basket Minutes" across months
fig4 <- long |>
filter(metric == "Count Of In Basket Minutes") |>
ggplot(aes(x = month, y = value, group = id, color = type)) +
geom_line(alpha = 0.3) +
geom_smooth(aes(group = metric), method = "loess", se = FALSE, size = 1) +
labs(
title = "In-Basket Minutes Over Time by Provider Type",
x = "Month",
y = "In-Basket Minutes"
) +
theme_minimal()
fig4
# Figure 4: plot line of "Count Of In Basket Minutes" across months
fig4 <- long |>
filter(metric == "Count Of In Basket Minutes") |>
ggplot(aes(x = month, y = value, group = id, color = type)) +
geom_line(alpha = 0.3) +
geom_smooth(aes(group = metric), method = "loess", se = FALSE, size = 1, color = "black") +
labs(
title = "In-Basket Minutes Over Time by Provider Type",
x = "Month",
y = "In-Basket Minutes"
) +
theme_minimal()
fig4
# Figure 4: plot line of "In-Basket Hours" across months
fig4 <- long |>
filter(metric == "In-Basket Minutes") |>
ggplot(aes(x = month, y = value / 60, group = id, color = type)) +
geom_line(alpha = 0.3) +
geom_smooth(aes(group = metric), method = "loess", se = FALSE, size = 1, color = "black") +
labs(
title = "In-Basket Minutes Over Time by Provider Type",
x = "Month",
y = "In-Basket Minutes"
) +
theme_minimal()
fig4
# Figure 4: plot line of "In-Basket Hours" across months
fig4 <- long |>
filter(metric == "In-Basket Minutes") |>
ggplot(aes(x = month, y = as.numeric(value) / 60, group = id, color = type)) +
geom_line(alpha = 0.3) +
geom_smooth(aes(group = metric), method = "loess", se = FALSE, size = 1, color = "black") +
labs(
title = "In-Basket Hours Over Time",
x = "Month",
y = "In-Basket Hours"
) +
theme_minimal()
fig4
str(long)
# Figure 4: plot line of "In-Basket Hours" across months
fig4 <- long |>
filter(metric == "Count Of In Basket Minutes") |>
ggplot(aes(x = month, y = value / 60, group = id, color = type)) +
geom_line(alpha = 0.3) +
geom_smooth(aes(group = metric), method = "loess", se = FALSE, size = 1, color = "black") +
labs(
title = "In-Basket Hours Over Time",
x = "Month",
y = "In-Basket Hours"
) +
theme_minimal()
fig4
# Figure 1: Distribution of Monthly In-Basket Hours by Provider Type
fig1 <- final |>
ggplot(aes(x = ib_hrs_pm, fill = type)) +
geom_histogram(binwidth = 1, position = "dodge", alpha = 0.7, color = "black") +
labs(
title = "Distribution of Monthly In-Basket Hours by Provider Type",
x = "Monthly In-Basket Hours",
y = "Count"
) +
theme_minimal()
# Figure 1: Distribution of Monthly In-Basket Hours by Provider Type
fig1 <- final |>
ggplot(aes(x = ib_hrs_pm, fill = type)) +
geom_histogram(binwidth = 1, position = "dodge", alpha = 0.7, color = "black") +
labs(
title = "Distribution of Monthly In-Basket Hours by Provider Type",
x = "Monthly In-Basket Hours",
y = "Count"
) +
theme_minimal()
fig1
# Figure 6: In-Basket minutes Vs. afterhours ratio across all
fig6 <- ggplot(final, aes(x = ib_hrs_pm, y = ah_sys_ratio)) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm", se = TRUE, color = "blue") +
labs(
title = "Monthly In-Basket Hours vs. Afterhours Ratio",
x = "Monthly In-Basket Hours",
y = "Afterhours/System Ratio"
) +
theme_minimal()
fig6
# Figure 6: In-Basket minutes Vs. afterhours ratio
fig6 <- ggplot(final, aes(x = ib_hrs_pm, y = ah_sys_ratio)) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm", se = TRUE, color = type) +
labs(
title = "Monthly In-Basket Hours vs. Afterhours Ratio",
x = "Monthly In-Basket Hours",
y = "Afterhours/System Ratio"
) +
theme_minimal()
# Figure 6: In-Basket minutes Vs. afterhours ratio
fig6 <- ggplot(final, aes(x = ib_hrs_pm, y = ah_sys_ratio, color = type)) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm", se = TRUE, color = type) +
labs(
title = "Monthly In-Basket Hours vs. Afterhours Ratio",
x = "Monthly In-Basket Hours",
y = "Afterhours/System Ratio"
) +
theme_minimal()
# Table 2: Monthly Summary Statistics
fte =
# Table 3:
# Table 4:
# Figure 1: Ranked barplot of Monthly In-Basket Hours (color = type)
fig1 <- final |>
arrange(desc(ib_hrs_pm)) |>
mutate(provider_rank = row_number()) |>
ggplot(aes(x = provider_rank, y = ib_hrs_pm, fill = type)) +
geom_bar(stat = "identity") +
labs(
title = "Monthly In-Basket Hours by Provider",
x = "Provider Rank",
y = "Monthly In-Basket Hours"
) +
theme_minimal()
fig1
Monthly  by Provider
# Table 2: Message Type counts and dtc
tbl2 <- final |>
group_by(group, type) |>
summarise(
n = n(),
across(
c(n_mar, n_pcm, n_res, n_rxa, dtc_mar, dtc_pcm, dtc_res, dtc_rxa),
~ mean(.x, na.rm = TRUE)
)
)
View(tbl2)
# Table 2: Total count, monthly count, per scheduled day and dtc as rows, message types as columns
tbl2 <- final |>
select(
id, type,
n_msg, msg_pm, n_sch_day, dtc_msg,
n_mar, mar_pm, dtc_mar,
n_pcm, pcm_pm, dtc_pcm,
n_res, res_pm, dtc_res,
n_rxa, rxa_pm, dtc_rxa
) |>
pivot_longer(
-c(id, type),
names_to = c("metric", "message_type"),
names_sep = "_",
values_to = "value"
) |>
pivot_wider(
names_from = message_type,
values_from = value
) |>
arrange(type, metric)
final <- readRDS("~/repos/inbasketosis/data/final.rds")
View(final)
names(final)
# Save tables and figures
if (!dir.exists("outputs")) {
dir.create("outputs")
}
# inbasket hours Vs. ib_mpa_pct
p <- ggplot(final, aes(x = ib_hrs_pm, y = ib_mpa_pct)) +
geom_point(alpha = 0.5) +
geom_smooth(method = "lm", se = TRUE, color = "blue") +
labs(
title = "Monthly In-Basket Hours Vs. In-Basket Minutes Per Appointment Percentage",
x = "Monthly In-Basket Hours",
y = "In-Basket Minutes Per Appointment Percentage"
) +
theme_minimal()
library(dplyr)
library(tidyr)
library(readr)
library(ggplot2)
# inbasket hours Vs. ib_mpa_pct
p <- ggplot(final, aes(x = ib_hrs_pm, y = ib_mpa_pct)) +
geom_point(alpha = 0.5) +
geom_smooth(method = "lm", se = TRUE, color = "blue") +
labs(
title = "Monthly In-Basket Hours Vs. In-Basket Minutes Per Appointment Percentage",
x = "Monthly In-Basket Hours",
y = "In-Basket Minutes Per Appointment Percentage"
) +
theme_minimal()
p
# Load datasets
final <- readRDS("data/final.rds")
# correlation heatmap for all numeric in final
numeric_vars <- final |> select(where(is.numeric))
cor_matrix <- cor(numeric_vars, use = "pairwise.complete.obs")
cor_melted <- as.data.frame(as.table(cor_matrix))
ggplot(cor_melted, aes(Var1, Var2, fill = Freq)) +
geom_tile() +
scale_fill_gradient2(low = "blue", high = "red", mid = "white",
midpoint = 0, limit = c(-1,1), name="Correlation") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, vjust = 1,
size = 10, hjust = 1)) +
coord_fixed() +
labs(title = "Correlation Heatmap of Numeric Variables in Final Dataset",
x = "", y = "")
View(cor_matrix)
